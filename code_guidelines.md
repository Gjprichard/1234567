# 代码规范与工作流程指南

## 基本原则

1. **编程语言**: 所有后端代码必须使用Python编写，保持Python风格一致性。
2. **前端框架**: 所有前端开发必须使用Vue框架，遵循Vue的最佳实践。
3. **代码一致性**: 确保新添加的代码与现有代码风格和结构保持一致。
4. **模块化**: 性能优化和新功能应当模块化实现，并进行适当分类。
5. **业务隔离**: 修改代码时应当只关注相关业务模块，不相关的代码模块不应被修改。
6. **测试驱动**: 所有新代码必须经过测试，并在合并前进行二次确认。

## 详细规范

### 1. Python编码规范

- 遵循PEP 8编码风格指南
- 使用4个空格进行缩进，不使用制表符
- 行长度不超过100个字符
- 使用有意义的变量名和函数名，采用snake_case命名方式
- 类名使用CamelCase命名方式
- 常量使用全大写，单词间用下划线分隔
- 每个函数和类应当有文档字符串(docstring)说明其功能和参数

### 2. Vue前端开发规范

- 使用Vue 3和Composition API进行开发
- 使用TypeScript进行类型检查
- 组件命名采用PascalCase（如MyComponent.vue）
- 组件属性和方法采用camelCase命名方式
- 使用Vue Router进行路由管理
- 使用Pinia或Vuex进行状态管理
- 使用Vue CLI或Vite作为构建工具
- 遵循单文件组件(SFC)规范
- CSS采用Scoped CSS或CSS Modules方式隔离样式
- 使用ESLint和Prettier保持代码风格一致性
- 组件应当遵循单一职责原则，保持简洁和可复用性
- 使用异步组件处理大型组件的加载
- 使用环境变量管理不同环境的配置

### 3. 代码一致性要求

- 新代码应当遵循项目现有的架构和设计模式
- 变量命名、注释风格、错误处理方式应与现有代码保持一致
- 配置参数应当集中管理，不应在代码中硬编码
- 保持函数和方法的单一职责原则
- 相似功能应使用相似的实现方式

### 4. 性能组件管理

- 性能相关的代码应当单独整理为独立模块或类
- 缓存机制、限速控制、并发处理等性能组件应当分类管理
- 性能组件应当有清晰的配置接口和文档
- 性能优化应当可度量，并记录优化前后的性能差异
- 性能组件应当有日志记录，便于问题排查

### 5. 代码修改流程

- 修改代码前，先确定相关业务模块的边界
- 使用代码搜索工具定位需要修改的代码区域
- 只修改与当前任务直接相关的代码
- 不相关的代码模块即使存在问题也应在单独的任务中处理
- 修改完成后进行代码审查，确保没有影响到其他模块

### 6. 测试与确认流程

- 新代码必须编写对应的单元测试
- 修改后的代码必须通过所有现有测试
- 进行集成测试，确保与其他模块的兼容性
- 在开发环境中进行完整功能测试
- 测试通过后，由另一位开发者进行代码审查和二次确认
- 只有经过二次确认的代码才能合并到主分支

## API请求与数据处理规范

- API请求应实现缓存机制，避免频繁请求同一资源
- 实现请求限速，避免触发API提供方的限流措施
- 所有外部API调用应有超时设置和错误处理
- 数据处理应当考虑大数据量情况下的性能
- 敏感数据应当加密存储，API密钥不应硬编码在源代码中

## 日志与监控规范

- 所有关键操作应当记录日志
- 日志级别应当合理设置，避免过多的调试信息
- 错误和异常必须记录详细信息，便于问题排查
- 性能关键点应当有监控指标
- 用户操作应当有审计日志

## 版本控制与发布

- 遵循语义化版本控制(Semantic Versioning)
- 每次发布应当有明确的版本号和变更日志
- 主要版本更新应当有完整的升级文档
- 发布前必须在模拟生产环境中进行测试
- 回滚机制应当被测试和文档化

---

本规范文档应当定期更新，以反映项目的最新需求和最佳实践。所有团队成员应当熟悉并遵循这些规范。 